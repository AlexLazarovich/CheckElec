<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>השוואת מסלולים</title>
  <link rel="stylesheet" href="styles.css">
  <!-- טעינת PapaParse מ-CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
</head>
<body>
  <div class="container">
    <h1>השוואת מסלולים</h1>

    <!-- הסבר – מוסתר בהתחלה -->
    <div id="helpSection" class="help-box" style="display: none;">
      <h3>איך להשתמש באפליקציה?</h3>

      <!-- Step 1 -->
      <div class="help-step" data-step="1">
        <div class="help-step-header">
          <div class="help-step-number">1</div>
          <span class="help-step-title">הורדת נתוני צריכה</span>
        </div>
        <div class="help-step-body">
          <ul>
            <li>התחברו לאזור האישי באתר חברת החשמל.</li>
            <li>בתפריט «פעולות» בחרו ב‑«נתוני הצריכה שלך» → «מצב צריכה עדכני».</li>
            <li>לחצו על «קבל קובץ צריכה למייל שלך».</li>
          </ul>
        </div>
      </div>

      <!-- Step 2 -->
      <div class="help-step" data-step="2">
        <div class="help-step-header">
          <div class="help-step-number">2</div>
          <span class="help-step-title">העלאת נתוני צריכה</span>
        </div>
        <div class="help-step-body">
          <ul>
            <li>לחצו על «העלה קובץ» והעלו את קובץ הצריכה שקיבלתם במייל.</li>
          </ul>
        </div>
      </div>

      <!-- Step 3 -->
      <div class="help-step" data-step="3">
        <div class="help-step-header">
          <div class="help-step-number">3</div>
          <span class="help-step-title">עריכת מסלולים</span>
        </div>
        <div class="help-step-body">
          <p>
            המסלולים המוצגים כברירת מחדל הם הנפוצים ביותר המוצעים בשוק.
            <br>
            במידה והספק אשר תרצו להתחבר אליו מציע מסלולים חלופיים, תוכלו לערוך או להוסיף מסלולים לבחירתכם.
            <br>
            לחצו על «ערוך» כדי לשנות את שם המסלול, אחוז ההנחה ושעות ההנחה הנבחר.
          </p>

          <!-- כותרת קטנה לרשת הספקים -->
          <h4 class="supplier-header">ספקים</h4>
          <!-- רשת ספקי חשמל -->
          <div class="supplier-grid">
            <a href="https://bezeq-nrg.co.il/" class="supplier-item" target="_blank">
              <img src="assets/bezeq-energy.png" alt="בזק אנרג'י">
            </a>
            <a href="https://cellcom.co.il/" class="supplier-item" target="_blank">
              <img src="assets/cellcom-energy.png" alt="סלקום חשמל">
            </a>
            <a href="https://www.pazgas.co.il/" class="supplier-item" target="_blank">
              <img src="assets/pazgaz-hashmal.png" alt="פזגז חשמל">
            </a>
            <a href="https://www.hot.net.il/heb/HOTEnergy/" class="supplier-item" target="_blank">
              <img src="assets/hot-energy.png" alt="הוט אנרג'י">
            </a>
            <a href="https://www.electra-power.co.il/" class="supplier-item" target="_blank">
              <img src="assets/electra-power.png" alt="אלקטרה פאוור">
            </a>
            <a href="https://www.amisragas.co.il/" class="supplier-item" target="_blank">
              <img src="assets/amisragaz-energy.jpg" alt="אמישראגז חשמל">
            </a>
            <a href="https://www.partner.co.il/" class="supplier-item" target="_blank">
              <img src="assets/partner-power.png" alt="פרטנר פאוור">
            </a>
            <a href="https://www.escoisrael.com/" class="supplier-item" target="_blank">
              <img src="assets/esco.jpg" alt="ESCO ישראל">
            </a>
          </div>
          <!-- סוף רשת ספקים -->
        </div>
      </div>

      <!-- Step 4 -->
      <div class="help-step" data-step="4">
        <div class="help-step-header">
          <div class="help-step-number">4</div>
          <span class="help-step-title">חישוב תוצאות</span>
        </div>
        <div class="help-step-body">
          <ul>
            <li>לחצו על «חשב תוצאות»</li>
            <li>האפליקציה תחשב את הסכום הסופי לכל מסלול ותציג את המסלול המשתלם ביותר בהתבסס על אופי הצריכה שלכם  (לפי מחיר 54.25 אג' לקוט"ש + מע"מ 18%).</li>
          </ul>
        </div>
      </div>

      <!-- Step 5 -->
      <div class="help-step" data-step="5">
        <div class="help-step-header">
          <div class="help-step-number">5</div>
          <span class="help-step-title">שינוי תקופה – לא חובה</span>
        </div>
        <div class="help-step-body">
          <ul>
            <li>ברירת המחדל היא כל התקופה שבקובץ.</li>
            <li>אם ברצונכם לבדוק טווח אחר—למשל שינויים בהרגלי צריכת החשמל בשבוע האחרון—לחצו על «שנה תקופה», בחרו תאריכים ולחצו «שמור».</li>
          </ul>
        </div>
      </div>

      <div class="center">
        <button id="closeHelpButton" class="btn">סגור</button>
      </div>
    </div>
    
    <!-- כפתור העלאת קובץ – הקלט מוסתר לחלוטין -->
    <div class="upload-container">
      <button id="toggleHelpButton" class="btn">הסבר</button>
      <label class="btn file-upload-button" for="csvFileInput">העלה קובץ</label>
      <input type="file" id="csvFileInput" accept=".csv">
    </div>
    
    <!-- סקשן מסלולים (מופיע לאחר העלאת קובץ) -->
    <div id="plansSection" style="display: none;">
      <h2>מסלולים</h2>
      <div id="plansList"></div>
      <div class="center">
        <button id="addPlanButton" class="btn">הוסף מסלול</button>
      </div>
    </div>
    
    <!-- חלון בחירת תאריכים, מוסתר כברירת מחדל; סדר התאריכים מוגדר ל-LTR -->
    <div id="filterSection" style="display: none;">
      <div class="date-range" dir="ltr">
        <input type="date" id="startDateInput">
        <span class="arrow">→</span>
        <input type="date" id="endDateInput">
      </div>
      <button id="closeFilterButton" class="btn">ביטול</button>
    </div>

        <!-- כפתור שינוי תקופה, מופיע מתחת למסלולים, תמיד במרכז -->

    <div id="actionButtons" class="center" style="margin-top: 30px; display: flex; justify-content: center; gap: 20px;">
        <button id="toggleDateButton" class="btn" style="display: none; margin: 0 auto;">שנה תקופה</button>
        <button id="applyFilterButton" class="btn btn-calc" style="display: none; margin: 0 auto;">חשב תוצאות</button>
    </div>

    
    <!-- אזור תוצאות – מוסתר כברירת מחדל -->
    <div id="results" style="display: none;"></div>
  </div>
  
  <script src="script.js"></script>
</body>
</html>
 